---
title: "API Documentation"
---

## Studio List Module

The **Studio Module** is designed for users who wish to discover, book, live session, and review fitness studios, gyms, yoga centers, or personal training sessions — both online and offline.  
It provides a seamless experience that connects users with studios in their nearby location and supports flexible booking options.

### Module Overview

Users can search for studios or sessions by **place name, city, or keyword**, and apply **filters** (such as distance, category, or session type) to refine their results. Once a suitable studio is found, the user can book:

- **Offline sessions** — Attend in-person at the selected studio
- **Online live sessions** — Join virtual classes hosted by studio owners or managers
- **Personal training sessions** — One-on-one coaching based on availability

This module centralizes all features to **simplify user effort**, offering smooth discovery, booking, payment, and review workflows.

### Key Capabilities

- **Studio Discovery:** Search and filter studios based on city or location proximity
- **Session Types:** Support for _offline_, _online live_, and _personal_ training sessions
- **Booking Flow:** Integrated session selection, availability checking, and booking confirmation
- **Review Management:** Users can post feedback, upload review media, and rate their experiences
- **Rating Insights:** Aggregated rating data helps studios improve and users make informed choices
- **Seamless User Experience:** Designed to minimize steps for booking and feedback submission

---

### Studio List APIs

Below are the APIs related to the **Studio List** within this module, allowing users to perfom all possible action that is inside the studios module.

---

## Base URL

```
/api/fitnearn/web/users/studio
```

---

## Middleware

### `idGenerationMiddleware('RCPT')`

- **Purpose**: Generates a unique Receipt ID (`RCPTxxxxx`) for new refunds
- **Usage**: Required for identifying each refund transaction

### `upload.single('attachment')`

- **Headers (for file upload)**:
  - `Authorization` (string): Bearer token (required if uploading file)
  - `x-refresh-token` (string): Refresh token (required if uploading file)
  - `x-username` (string): Username (required if uploading file)
- **Purpose**: Handles file upload using multer to S3
- **Usage**: Required for generating image/attachment URLs for queries

---

## Endpoints

### 1. Get Coordinates

Retrieves geographical coordinates for a given address.

- **Method**: `GET`
- **URL**: `/get-coordinates`
- **Controller**: `getCoordinates`
- **Query Parameters**:
  - `address` (string): Address to geocode (required)
- **Success Response**:
  ```json
  {
    "success": true,
    "data": {
      "latitude": 29.8663,
      "longitude": 77.8912
    }
  }
  ```
- **Error Responses**:
  - `404 Not Found`: Coordinates not found

---

### 2. Get Autocomplete Suggestions

Returns place suggestions based on user input.

- **Method**: `GET`
- **URL**: `/suggestplaces`
- **Controller**: `getAutoComplete`
- **Query Parameters**:
  - `input` (string): Search input (required)
- **Success Response**:
  ```json
  {
    "success": true,
    "data": [
      { "description": "Place 1", "place_id": "..." },
      { "description": "Place 2", "place_id": "..." }
    ]
  }
  ```
- **Error Responses**:
  - `400 Bad Request`: Input is required
  - `404 Not Found`: Coordinates not found

---

### 3. Get Nearby Studios

Fetches list of studios near specified location with optional filters.

- **Method**: `GET`
- **URL**: `/studiolist`
- **Controller**: `getNearbyStudios`
- **Query Parameters**:
  - `lat` (string): Latitude (optional, defaults to Roorkee)
  - `lng` (string): Longitude (optional, defaults to Roorkee)
  - `address` (string): Address to search near (optional)
  - `radius` (string): Search radius in meters (optional, default 50000)
  - `userId` (string): User ID for personalization (optional)
  - `categories` (string): Comma-separated studio types (optional)
  - `amenities` (string): Comma-separated amenities (optional)
  - `rating` (string): Minimum rating filter (optional)
  - `time` (string): Time preference (optional)
  - `date` (string): Date filter (optional)
- **Success Response**:
  ```json
  {
    "success": true,
    "data": [
      {
        "studioId": "STD00123",
        "name": "Fitness Hub",
        "services": ["Yoga", "Gym"],
        "distance": 2.5,
        "shortAddress": "Delhi",
        "reviewCount": 45,
        "rating": 4.5,
        "timeTag": ["Morning", "Evening"],
        "firstTrial": false,
        "isLike": false,
        "checkinTime": "06:00 AM",
        "thumbnail": "https://...",
        "upcomingLiveSession": true
      }
    ],
    "total": 1
  }
  ```
- **Error Responses**:
  - `500 Internal Server Error`: Error fetching nearby gyms

---

### 4. Get Studio Detail

Retrieves detailed information about a specific studio.

- **Method**: `GET`
- **URL**: `/studioDetail/:studioId`
- **Controller**: `getStudioDetail`
- **URL Parameters**:
  - `studioId` (string): Studio identifier (required)
- **Query Parameters**:
  - `userId` (string): User ID for personalization (optional)
- **Success Response**:
  ```json
  {
    "success": true,
    "data": {
      "studioId": "STD00123",
      "name": "Fitness Hub",
      "shortAddress": "Connaught Place",
      "coordinates": { "lng": 77.2167, "lat": 28.6139 },
      "services": ["Yoga", "Gym"],
      "amenities": ["Shower", "Locker"],
      "aboutStudio": "Premium fitness center...",
      "studioTypes": ["Gym", "Yoga"],
      "timeTags": ["Morning", "Evening"],
      "reviewCount": 45,
      "rating": 4.5,
      "openingTime": "06:00 AM",
      "closingTime": "10:00 PM",
      "timeSlots": ["06-07 AM", "07-08 AM"],
      "isLike": false,
      "firstTrial": false,
      "adminDiscountPercentage": 10,
      "basePrice": 500,
      "finalPrice": 450,
      "discountPercentage": 5,
      "taxRate": 18,
      "taxAmount": 81,
      "payableAmount": 531,
      "owner": {
        "name": "John Doe",
        "bio": "Fitness enthusiast...",
        "profileImage": "https://...",
        "rating": 4.5
      },
      "rules": ["No smoking", "Proper attire required"],
      "dayAvailability": ["Mon", "Tue", "Wed"],
      "images": ["https://...", "https://..."],
      "reviews": [...]
    }
  }
  ```
- **Error Responses**:
  - `404 Not Found`: Studio not found
  - `500 Internal Server Error`

---

### 5. Like/Dislike Item

Toggles like status for studios, live sessions, or other content.

- **Method**: `POST`
- **URL**: `/:userId/like/:type/:refId`
- **Controller**: `likeItem`
- **URL Parameters**:
  - `userId` (string): User identifier (required)
  - `type` (string): Type of content - `likedBlogs`, `publicSessions`, `likedComments`, `likedStudios`, `likedStudiosLS`, `likedProducts`, `likedWorkoutsVideos` (required)
  - `refId` (string): Reference ID of content (required)
- **Query Parameters**:
  - `action` (string): `like` or `dislike` (required)
- **Success Response**:
  ```json
  {
    "success": true,
    "message": "likedStudios liked successfully."
  }
  ```
- **Error Responses**:
  - `400 Bad Request`: Missing parameters or invalid type/action
  - `200 OK`: Already liked/disliked
  - `500 Internal Server Error`

---

### 6. Share Studio or Live Session

Records a share action for studio or live session.

- **Method**: `GET`
- **URL**: `/share/:id/:userId`
- **Controller**: `shareStudioOrLS`
- **URL Parameters**:
  - `id` (string): Studio or session identifier (required)
  - `userId` (string): User identifier (required)
- **Query Parameters**:
  - `type` (string): `LiveSession` or `Studio` (optional, default: `Studio`)
- **Success Response**:
  ```json
  {
    "success": true,
    "message": "Studio shared successfully."
  }
  ```
- **Error Responses**:
  - `400 Bad Request`: Missing sessionId/userId or invalid type
  - `404 Not Found`: Live session/studio not found
  - `500 Internal Server Error`

---

### 7. Verify Studio Time Availability

Checks if a specific time slot is available for booking.

- **Method**: `GET`
- **URL**: `/verifyTimeSlot/:studioId`
- **Controller**: `verifyStudioTimeAvailability`
- **URL Parameters**:
  - `studioId` (string): Studio identifier (required)
- **Query Parameters**:
  - `userId` (string): User identifier (optional)
  - `date` (string): Date in DD-MM-YYYY format (required)
  - `time` (string): Time slot e.g., "09-10 PM" (required)
- **Success Response**:
  ```json
  {
    "success": true,
    "message": "This slot is available"
  }
  ```
- **Error Responses**:
  - `400 Bad Request`: Fields missing or slot not available/passed
  - `404 Not Found`: Studio not found
  - `500 Internal Server Error`

---

### 8. Check Live Session Booking

Verifies if user has already booked a live session.

- **Method**: `GET`
- **URL**: `/verifyLSBooking/:userId`
- **Controller**: `checkLSBooking`
- **URL Parameters**:
  - `userId` (string): User identifier (required)
- **Query Parameters**:
  - `sessionId` (string): Session identifier (required)
- **Success Response**:
  ```json
  {
    "success": true,
    "message": "Session is not booked yet."
  }
  ```
  or
  ```json
  {
    "success": false,
    "message": "This session is already booked."
  }
  ```
- **Error Responses**:
  - `500 Internal Server Error`

---

### 9. Post Studio Review

Allows a user to submit a review for a studio they have booked.

- **Method**: `POST`
- **URL**: `/api/fitnearn/web/users/store/postReview/:productId`
- **Controller**: `postReview`
- **Middleware**:
  - `upload.single('file')`: Handles optional review image uploads
  - `idGenerationMiddleware('REVID')`: Generates unique review ID
- **Request Parameters**:
  - `productId` (string): Studio identifier (required)
- **Request Body**:
  - `rating` (number): Rating value (required)
  - `userId` (string): User identifier (required)
  - `review` (string): Review content (optional)
  - `type` (string): Must be `"Studio"` (required)
  - `file` (file): Image file of rating (optional)
- **Headers (for file upload)**:
  - `Authorization` (string): Bearer token (required if uploading file)
  - `x-refresh-token` (string): Refresh token (required if uploading file)
  - `x-username` (string): Username (required if uploading file)
- **Success Response**:

  ```json
  {
    "success": true,
    "message": "Review is Posted"
  }
  ```

- **Error Responses**:

  - `401 Unauthorized`: Missing rating, user ID, or authorization tokens
  - `400 Bad Request`: Invalid review type or duplicate review
  - `403 Forbidden`: User has not booked the studio
  - `404 Not Found`: User not found
  - `500 Internal Server Error`: Unexpected error during review posting or file upload

---

### 10. Get All Studio Reviews

Fetches all reviews for a specific studio.

- **Method**: `GET`
- **URL**: `/api/fitnearn/web/users/store/allReviews/:productId`
- **Controller**: `getReviews`
- **Query Parameters**:

  - `type` (string): Must be `"Studio"` (required)
  - `search` (string): Optional keyword to filter review content
  - `sortby` (string): Sorting criteria (`latest`, `oldest`, `mostrated`) (optional, default: `mostrated`)
    **Success Response**:

  ```json
  {
    "success": true,
    "message": "Reviews retrieved successfully",
    "data": {
      "totalReviews": 12,
      "finalReviews": [
        {
          "reviewId": "REVID00123",
          "rating": 4.5,
          "content": "Amazing studio experience!",
          "userId": "USR00056",
          "createdAt": "2025-01-10T12:00:00Z",
          ...
        }
      ]
    }
  }
  ```

- **Error Responses**:
  - `400 Bad Request`: Missing or invalid parameters
  - `404 Not Found`: Studio not found
  - `500 Internal Server Error`: Error retrieving reviews

---

### 11. Get Studio Rating Details

Retrieves aggregate rating data and distribution for a studio.

- **Method**: `GET`
- **URL**: `/api/fitnearn/web/users/store/ratingDetails/:productId`
- **Controller**: `getRatingDetails`
- **Query Parameters**:
  - `type` (string): Must be `"Studio"` (required)
- **Success Response**:

  ```json
  {
    "success": true,
    "message": "Ratings retrieved successfully",
    "data": {
      "totalRatings": 4.6,
      "ratingDetails": {
        "5": 45,
        "4": 10,
        "3": 3,
        "2": 1,
        "1": 0
      }
    }
  }
  ```

- **Error Responses**:

  - `400 Bad Request`: Missing or invalid type parameter
  - `404 Not Found`: Studio not found
  - `500 Internal Server Error`: Error fetching ratings

---

### 12. Report Studio

Allows users to report a studio for inappropriate content or behavior.

- **Method**: `POST`
- **URL**: `/report/:studioId`
- **Controller**: `reportStudio`
- **URL Parameters**:
  - `studioId` (string): Studio identifier (required)
- **Request Body**:
  - `userId` (string): User identifier (required)
  - `reason` (string): Report reason (required)
- **Success Response**:
  ```json
  {
    "success": true,
    "message": "Studio reported successfully"
  }
  ```
- **Error Responses**:
  - `400 Bad Request`: Studio already reported
  - `404 Not Found`: Studio/user not found
  - `500 Internal Server Error`

---

### 13. Get Dropdowns and Values

Get all dropdowns fields & names that is used in Filters & Dropdowns

#### Base URL

```
https://5600bev1n3.execute-api.ap-south-1.amazonaws.com/dev
```

- **Method**: `GET`
- **URL**: `/api/fitnearn/web/admin/get/subcategories/namefields/:subcategoryId`
- **Controller**: `getNameFieldsForSubCategory`
- **URL Parameters**:
  - `idOrName` (string): subcategory Id or its name (required)
- **Query Parameters**:
  - `status` (string): status i.e "Active" or "Inactive" in (optional)
- **Success Response**:
  ```json
  {
    "success": true,
    "data": {
      "subCategoryID": "SUB_CATEGORY00016",
      "mainCategoryID": "MAIN_CATEGORY00005",
      "subCategoryName": "Studio Amenities",
      "status": "Active",
      "additionalFieldsDefinitions": [],
      "nameFields": [
        {
          "nameFieldID": "NAMEFIELD00121",
          "subCategoryID": "SUB_CATEGORY00016",
          "name": "Free Wi-fi",
          "status": "Active"
        },
        {
          "nameFieldID": "NAMEFIELD00120",
          "subCategoryID": "SUB_CATEGORY00016",
          "name": "Childcare Facilities",
          "status": "Active"
        }
      ]
    }
  }
  ```
- **Error Responses**:
  - `400 Bad Request`: Subcategory not found`
  - `500 Internal Server Error`

---
